// Limitar tamanho máximo do arquivo 
const maxFileSize = 5 * 1024 * 1024; // 5MB

// Verificar se arquivo foi selecionado
if(!file) {
  alert('Por favor, selecione um arquivo para compressão');
  return;
}

// Verificar tamanho do arquivo
if(file.size > maxFileSize) {
  alert('O arquivo deve ter no máximo ' + maxFileSize + ' bytes');
  return;  
}

// Exibir loading durante compressão
const loading = document.getElementById('loading');
loading.style.display = 'block';

// Compressão assíncrona com Web Worker
const worker = new Worker('compression-worker.js'); 

worker.postMessage(file);

worker.onmessage = e => {
  // Código para lidar com arquivo compresso  
  // e permitir download

  loading.style.display = 'none'; 
}

// Mostrar confirmação de download
downloadLink.addEventListener('click', e => {
  if(confirm('Arquivo pronto para download. Confirma?')) {
    // Permitir download
  } else {
    e.preventDefault(); // Cancelar download
  }
})

// Resetar input file após download
downloadLink.addEventListener('click', e => {
  fileInput.value = null; 
})